# yaml-language-server: $schema=https://taskfile.dev/schema.json
version: '3'

tasks:
  format:check:
    desc: 'Check if code is properly formatted (CI mode)'
    silent: true
    cmds:
      - echo "Checking Python code formatting..."
      - black --check --diff src/ scripts/
      - isort --check-only --diff src/ scripts/
      - echo "Checking HTML/TOML file formatting..."
      - dprint check
      - echo "âœ… Code formatting is correct"

  lint:check:
    desc: 'Run linting checks without fixing (CI mode)'
    silent: true
    cmds:
      - echo "Running ruff linter..."
      - ruff check src/ scripts/
      - echo "Checking YAML files..."
      - yamllint .
      - echo "âœ… Linting checks passed"

  typos:check:
    desc: 'Check for typos in code and documentation'
    silent: true
    cmds:
      - echo "Checking for typos..."
      - typos
      - echo "âœ… No typos found"

  run:
    desc: 'Run all CI checks'
    silent: true
    cmds:
      - echo "ðŸš€ Running all CI checks..."
      - task: format:check
      - task: lint:check
      - task: typos:check
      - echo "âœ… All CI checks passed!"
